---
title: 交通大数据与分布式计算-数据管理
date: 2025-03-11 16:10:47
tags: 学习笔记 数据库
---
# 交通大数据与分布式计算技术-数据管理

## 一、常见交通数据存储格式

> XML（EXtensible Markup Language）也叫可扩展标记语言，是一种对文件进行标记并使其具有一定结构性的标记语言，类似于HTML。

### 1. XML文件
- **特点**：可扩展标记语言，用于数据传输与存储，适用于交通运输领域（如JT/T 1021-2016标准）。
- **语法规则**：
  1. 元素必须有关闭标签（如`<timestep></timestep>`）。
  2. 标签大小写敏感（如`<timestep>` ≠ `<Timestep>`）。
  3. 必须有根元素（唯一父元素）。
  4. 属性值需用引号包裹（单引号或双引号）。
  5. 所有元素的`id`属性值唯一。

### 2. CSV文件

> CSV是Comma-Separated Values的简写，其含义是逗号分隔值。

- **特点**：逗号分隔值，纯文本格式，结构类似关系型数据库表。
- **与Excel的区别**：
  | 特性          | CSV文件               | Excel文件（XLS/XLSX） |
  |---------------|-----------------------|----------------------|
  | 文件格式      | 纯文本                | 二进制               |
  | 功能          | 仅存储数据            | 支持计算、宏等       |
  | 文本编辑器兼容性 | 支持                 | 不支持               |
  | 内存开销      | 小，导入快            | 大，导入慢           |

### 3. HDF5文件

> HDF5（Hierarchical Data Format 5）是一种常见的跨平台数据储存文件，以“.h5”或者“.hdf5”作为后缀名，可以储存不同类型的文本甚至图像数据，可以在不同类型的机器间进行传输。

- **特性**：
  - 自述性：包含元数据描述数据维度、类型。
  - 通用性：支持多类型数据（文本、图像等）。
  - 扩展性：兼容新数据格式。
  - 灵活性：支持分层存储和多文件组合。
  - 跨平台性：与操作系统无关。

### 4. JSON文件

> JSON（JavaScript Object Notation，JavaScript对象表示法）是一种由道格拉斯·克罗克福特构想和设计、轻量级的资料交换语言，该语言以易于让人阅读的文字为基础，用来传输由属性值或序列性的值组成的数据对象。尽管JSON是JavaScript的一个子集，但JSON是独立于语言的文本格式，并且采用了类似于C语言家族的一些习惯。
>
> JSON数据格式与语言无关。即便它源自JavaScript，但目前很多编程语言都支持JSON格式数据的生成和解析。其文件扩展名为.json。

- **数据类型**：
  - 数值（十进制、支持负数和指数）。
  - 字符串（双引号包裹，支持转义字符）。
  - 布尔值（`true`/`false`）。
  - 数组（`[value1, value2]`）。
  - 对象（object）：若干无序的“键-值对”(key-value pairs)，其中，键是数值或字符串；建议但不强制要求对象中的键是独一无二的；例如：（`{key: value}`）。
  - `null`类型。

### 5. 数据库服务器

> 数据库服务器：指具备数据操作功能的程序集，往往作为一种操作系统级别的服务存在（如Windows中的系统服务），可以管理多个数据库。

- **适用场景**：大规模数据存储与复杂查询（如高速公路收费系统）。
- **RDBMS特点**：
  - 数据以表格形式存储。
  - 支持索引优化、事务处理。
  - 常用软件：MySQL、Oracle、SQL Server等。
- **关键术语**：
  - 主键：唯一标识记录的字段。
  - 外键：关联两个表的字段。
  - 索引：加速数据查询的结构。
  - 参照完整性：确保关系数据一致性。


## 二、SQL语言基础
- **常用命令**：
  
  ```sql
  INSERT INTO  -- 插入数据
  DELETE FROM  -- 删除数据
  UPDATE       -- 更新数据
  SELECT       -- 查询数据
  CREATE TABLE -- 创建表
  ALTER TABLE  -- 修改表结构
  DROP TABLE   -- 删除表
  ```
- **语法规范**：
  - 关键字建议大写（如`SELECT`）。
  - 每条命令以分号`;`结尾。
  - 注释：单行`-- 注释内容`，多行`/* 注释内容 */`。


## 三、数据表操作
### 1. 创建表

![image-20250311162802303](https://resource-un4.pages.dev/article/image-20250311162802303.png)

```sql
CREATE TABLE 表名 (
  列1 数据类型 [约束],
  列2 数据类型 [约束],
  PRIMARY KEY (主键列)
);
```

### 2. 删除表

```sql
DROP TABLE [IF EXISTS] 表名1, 表名2;
```
- **注意**：删除表会永久删除数据，建议先备份。


## 四、数据视图
### 1. 视图概念
- **虚拟表**：数据来自物理表，仅存储定义。

> 数据库关闭时消失

- **优点**：
  - 简化复杂查询。
  - 隐藏敏感数据，提升安全性。
- **与物理表区别**：
  | 特性       | 视图                | 物理表              |
  |------------|---------------------|---------------------|
  | 存储方式   | 仅存定义            | 存储实际数据        |
  | 物理存在   | 虚拟                | 真实存在            |
  | 数据更新   | 依赖物理表          | 直接更新            |

### 2. 创建视图

```sql
CREATE VIEW 视图名 AS
SELECT 列1, 列2 FROM 表名 WHERE 条件;
```

-  <SELECT语句>：指定创建视图的SELECT语句，可用于查询多个基础表或源视图。
- 用户除了拥有CREATE VIEW权限外，还应具有操作中涉及的基础表和其他视图的相关权限。
- SELECT语句不能引用系统或用户变量。
-  SELECT语句不能包含FROM子句中的子查询。
- SELECT语句不能引用预处理语句参数。

### 3. 删除视图

```sql
DROP VIEW 视图名1, 视图名2;
```


## 五、存储过程与触发器
### 1. 触发器

> 触发器和存储过程相似，都是嵌入到MySQL中的一段程序。触发器由事件触发某个操作。当数据库中这些事件发生时（如插入数据事件，修改数据事件等），就会激活触发器来执行相应的操作

- **触发事件**：INSERT、UPDATE、DELETE。
- **优点**：
  - 自动维护数据一致性。
  - 支持复杂业务逻辑。
- **缺点**：
  - 使用触发器实现的业务逻辑在出现问题时很难进行定位，特别是涉及到多个触发器时，后期维护比较困难。
  - 大量使用触发器容易导致代码结构混乱，增加了程序的复杂性
  - 如果需要变动的数据量较大时，触发器的执行效率会非常低。

### 2. 存储过程

- **作用**：封装SQL语句，实现代码重用。
- **优点**：
  - 隐藏复杂逻辑。
  - 支持参数和返回值。
- **缺点**：
  - 数据库依赖性强。
  - 跨平台兼容性差。

**总结**：数据管理是交通大数据处理的核心，合理选择存储格式、掌握SQL操作及高级数据库对象（视图、存储过程、触发器）可有效提升数据处理效率与安全性。